# Práctica 2: Servidor de Correo (Postfix) (2 puntos)

# Paso 1: Instalar Postfix y utilidades
sudo dnf install postfix mailx -y
sudo systemctl enable --now postfix
# Verifica:
sudo systemctl status postfix

# Paso 2: Configurar Postfix para salida directa
# Edita el archivo principal:
sudo nano /etc/postfix/main.cf

# Asegúrate de que existan las siguientes líneas:
myhostname = wilkanmendez.rhel.com
mydomain = rhel.com
myorigin = $syhostname
mydestination = $myhostname, localhost.localdomain, localhost
inet_interfaces = all
inet_protocols = ipv4
mynetwork = tu ip/24. 127.0.0.0/0
Host_mailbox = maildlt/
#########
relayhost = [smtp.gmail.com]:587
smtp_use-tls = yes
smtp_sasl_auth_enable =yes
smtp_sasl_security_options = noanonymous
smtp_sasl_password_maps = lmdb:/etc/postfix/sasl_passwd
smtp_tls_seccion_cache_database = lmdb:${data_directory}/smtp_scache
# Guarda
# Crea el archivo Sasl
sudo nano /etc/postfix/sasl_passwd
# Agrega la clave creada en google.com
[smtp.gmail.com]:587 wilkerjerez1@gmail.com:vaoy xtkk actd figc

# le damos permisos a la carpeta
sudo chmod 600 /etc/postfix/sasl_passwd
# Ahora levantaremos el servicio postmap
sudo postmap /etc/postfix/sasl_passwd
# reinicia:
sudo systemctl restart postfix

# Paso 3: Enviar el correo de prueba
# Comando:
echo "Nombre: Wilkan Méndez - Mat> 20221938" | mailx -s "MambruSeFueALaGuerra" wilkanmendez@gmail.com
echo "Nombre: Wilkan Méndez - Mat> 20221938" | mailx -s "MambruSeFueALaGuerra" os3conadrian@gmail.com

# Verifica el envío:
sudo tail -f /var/log/maillog

# Si todo está correcto, el profesor debe recibir el correo con ese asunto y tu información.
